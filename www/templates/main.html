<ion-view view-title="Listado">

  <ion-nav-title>
    Listado de ofertas {{nombre}}
  </ion-nav-title>

  <ion-nav-buttons side="right">
    <button class="button button-clear" ng-click="recargarDatos()">
      <img src="img/ic_cached.png" alt="Preferencias" width="34" height="34">
    </button>
    <button class="button button-clear" ng-click="preferencias()">
      <img src="img/settings_black.png" alt="Preferencias" width="34" height="34">
    </button>
  </ion-nav-buttons>

  <ion-pane>    
    <ion-content>
      <ion-list>
        <ion-item ng-repeat="oferta in ofertas" ui-sref="detalle({ofertaId: $index})">
        <div>
          <p> <h2 id="nombreOferta">{{oferta.nombre}}</h2> <h3 id="distanciaOferta">{{oferta.distancia}} m</h3> <br>
           <h3 id="descripcionOferta">{{oferta.descripcion_corta}}</h3>  <h3 id="finOferta">{{oferta.fin}}</h3></p>
        </div>
        </ion-item>
      </ion-list>


<script>
var applicationId = "4R2V91bSep94FYqbspK1UkLIAL2Kd5IQJFCmZsMB";
var clientKey = "BWlU4AtdgyJsSLklJTYN4nk9cWpQNeuXZPxbALtp";

document.addEventListener("deviceready", function(){
  //call registerAsPushNotificationClient internally
  window.parse.setUp(applicationId, clientKey);
  
  //registerAsPushNotificationClient callback
  window.parse.onRegisterAsPushNotificationClientSucceeded = function() {
    alert('Registrado como cliente en notificaciones');
  };
  window.parse.onRegisterAsPushNotificationClientFailed = function() {
    alert('Registro fallido como cliente en notificaciones');
  };
  
  //subscribe callback
  window.parse.onSubscribeToChannelSucceeded = function() {
    alert('Suscrito a canal');
  };
  window.parse.onSubscribeToChannelFailed = function() {
    alert('Suscrito a canal fallido');
  };  
  //unsubscribe callback
  window.parse.onUnsubscribeSucceeded = function() {
    alert('Cancelada suscripción a canal');
  };
  window.parse.onUnsubscribeFailed = function() {
    alert('Cancelada suscripción a canal fallida');
  };  
}, false);

//window.parse.subscribeToChannel('news');
//window.parse.unsubscribe('news');
</script>


    </ion-content>
  </ion-pane>
</ion-view>